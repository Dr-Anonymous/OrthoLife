import{c,r as o,j as e,B as r,H as $,t as v}from"./index-DYCdECr2.js";import{C as p,a as D,b as U,d as T,c as z}from"./card-B7__9nPQ.js";import{s as O}from"./client-opfxi3BE.js";import{P as w}from"./phone-DAWZ9XqU.js";import{S as B}from"./search-C2378W3S.js";import{L as C}from"./link-JZZbcmPv.js";import{C as K}from"./calendar-B3ZTj5yV.js";import{U as V}from"./user-B71ZlHy8.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=c("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=c("Clipboard",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=c("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=c("Folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=c("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=c("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=c("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),ne=()=>{const[n,h]=o.useState(""),[M,f]=o.useState(!1),[g,x]=o.useState([]),[A,u]=o.useState([]),[b,j]=o.useState(!1),[k,S]=o.useState([]),d=a=>{const s=a.replace(/[^0-9]/g,"");return s.startsWith("91")&&s.length===12?s.slice(2):s};o.useEffect(()=>{const a=new URLSearchParams(window.location.search),s=a.getAll("numbers[]"),t=a.getAll("names[]");if(s.length>0){const l=s.map((H,N)=>({number:d(H),name:t[N]||`Number ${N+1}`}));S(l),l.length>0&&h(l[0].number)}else{const l=a.get("number");l&&h(d(l))}},[]);const P=async()=>{if(n.length===10){j(!0),x([]),u([]);try{const{data:a,error:s}=await O.functions.invoke("search-whatsappme-records",{body:{phoneNumber:n}});if(s)throw s;x(a.patientFolders||[]),u(a.calendarEvents||[])}catch(a){console.error("Error searching records:",a),i("Failed to search for records.")}finally{j(!1)}}else i("Please enter a valid 10-digit phone number."),x([]),u([])},m=a=>{if(!n){i("Please enter a phone number");return}const s=d(n);if(!s){i("Please enter a valid phone number");return}let t;switch(a){case 2:t=new Date().getDay()===0?"Dr%20Samuel%20Manoj%20Cherukuri%0A_98668%2012555_%0A%0AAfter%20%2A_4%20pm_%2A%20at%20%20%2AOrthoLife%2A%20%3A%0ARoad%20number%203%2C%0AR%20R%20Nagar%2C%20near%20RTO%20office%2C%0AKakinada%0A%0ALocation%3A%0Ahttps%3A%2F%2Fg.co%2Fkgs%2F6ZEukv":"Dr%20Samuel%20Manoj%20Cherukuri%0A_98668%2012555_%0A%0AAfter%20%2A_7%3A30%20pm_%2A%20at%20%20%2AOrthoLife%2A%20%3A%0ARoad%20number%203%2C%0AR%20R%20Nagar%2C%20near%20RTO%20office%2C%0AKakinada%0A%0ALocation%3A%0Ahttps%3A%2F%2Fg.co%2Fkgs%2F6ZEukv";break;case 3:t="_Dr%20Samuel%20Manoj%20Cherukuri_%0A%2A98668%2012555%2A%20%0A%0A9-5%20pm%20at%3A%0ALaxmi%20Hospital%2C%0AGudarigunta%2C%20Kakinada%0A%0ALocation%3A%0Ahttps%3A%2F%2Fg.co%2Fkgs%2F5Xkr4FU";break;case 4:t="_Dr%20Samuel%20Manoj%20Cherukuri_%20%0A9866812555%0A%0A%20%2A5-7%20pm%2A%20at%3A%0A%20_Badam%20clinical%20laboratory_%20%0Ahttps%3A%2F%2Fg.co%2Fkgs%2FeAgkp5S";break;default:t="%2F"}const l=window.AndroidClipboard?`whatsapp://send?phone=91${s}&text=${t}`:`https://wa.me/91${s}?text=${t}`;window.location.href=l},y=a=>{if(!n){i("Please enter a phone number");return}const s=d(n);if(!s){i("Please enter a valid phone number");return}let t;switch(a){case 1:t=window.AndroidClipboard?`whatsapp://send?phone=917093551714&text=${s}`:`https://wa.me/917093551714?text=${s}`;break;case 2:t=window.AndroidClipboard?`whatsapp://send?phone=919652377616&text=${s}`:`https://wa.me/919652377616?text=${s}`;break;default:t="%2F"}window.location.href=t},L=()=>{if(!n){i("Please enter a phone number");return}const a=d(n);if(!a){i("Please enter a valid phone number");return}window.location.href=`sms:${a}?body=Dr%20Samuel%20Manoj%20Cherukuri%0A098668%2012555%0A%0A9-5pm%20at%3A%0ALaxmi%20Hospital%2C%20Gudarigunta%2C%20Kakinada%0ALocation%3A%0Ahttps%3A%2F%2Fg.co%2Fkgs%2F5Xkr4FU%0A%0AAfter%207pm%20at%20%28clinic%20address%29%3A%0ARoad%20number%203%2C%0AR%20R%20Nagar%2C%20near%20RTO%20office%2C%20Kakinada%0ALocation%3A%0Ahttps%3A%2F%2Fg.co%2Fkgs%2F6ZEukv`},R=async()=>{f(!0);let a;try{const s=window.AndroidClipboard;s&&s.getClipboardText?a=s.getClipboardText():a=await navigator.clipboard.readText();const t=d(a);h(t),E("Phone number pasted from clipboard")}catch(s){i("Failed to read clipboard. Please paste manually."),console.error("Clipboard error:",s)}finally{f(!1)}},_=a=>{h(a.target.value)},i=a=>{v({variant:"destructive",title:"Error",description:a})},E=a=>{v({title:"Success",description:a})};return e.jsxs(p,{className:"max-w-md mx-auto",children:[e.jsxs(D,{children:[e.jsxs(U,{className:"flex items-center gap-2 text-lg",children:[e.jsx(w,{className:"w-5 h-5 text-blue-600"}),"WhatsApp Communication"]}),e.jsx(T,{children:"Quickly send messages or share contact information"})]}),e.jsxs(z,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"tel",className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",value:n,onChange:_,placeholder:"Enter phone number"}),e.jsxs("div",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 flex gap-1",children:[e.jsx(r,{variant:"ghost",size:"sm",onClick:R,disabled:M,className:"h-7 px-2",children:e.jsx(F,{className:"w-4 h-4"})}),e.jsx(r,{variant:"ghost",size:"sm",onClick:P,disabled:b,className:"h-7 px-2",children:e.jsx(B,{className:"w-4 h-4"})})]})]})]}),b&&e.jsx("p",{children:"Loading..."}),g.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx(W,{className:"w-4 h-4"})," Patient Records"]}),e.jsx("div",{className:"space-y-2",children:g.map(a=>e.jsx(p,{className:"p-4",children:e.jsxs("a",{href:`https://drive.google.com/drive/folders/${a.id}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline flex items-center gap-2",children:[e.jsx(C,{className:"w-4 h-4"}),a.name]})},a.id))})]}),A.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx(K,{className:"w-4 h-4"})," Calendar Events"]}),e.jsx("div",{className:"space-y-4",children:A.map(a=>e.jsxs(p,{className:"p-4",children:[e.jsx("p",{className:"font-semibold",children:new Date(a.start).toLocaleString()}),e.jsx("div",{className:"text-sm mt-2",dangerouslySetInnerHTML:{__html:a.description.replace(/\n/g,"<br />")}}),a.attachments&&e.jsx("div",{className:"mt-2",children:e.jsxs("a",{href:a.attachments,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline flex items-center gap-1",children:[e.jsx(C,{className:"w-4 h-4"}),"View Attachment"]})})]},a.start))})]}),k.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[e.jsx(Z,{className:"w-4 h-4"})," Recent Calls"]}),e.jsx("div",{className:"space-y-2",children:k.map(a=>e.jsxs(p,{className:"p-4 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:a.name}),e.jsx("p",{className:"text-sm text-gray-500",children:a.number})]}),e.jsx(r,{onClick:()=>h(a.number),children:"Select"})]},a.number))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Send this address-"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(r,{variant:"outline",onClick:L,className:"h-auto py-2 flex-col gap-1",children:[e.jsx(G,{className:"w-4 h-4"}),e.jsx("span",{children:"SMS"})]}),e.jsxs(r,{variant:"outline",onClick:()=>m(1),className:"h-auto py-2 flex-col gap-1",children:[e.jsx(w,{className:"w-4 h-4"}),e.jsx("span",{children:"WhatsApp"})]}),e.jsxs(r,{variant:"outline",onClick:()=>m(2),className:"h-auto py-2 flex-col gap-1",children:[e.jsx($,{className:"w-4 h-4"}),e.jsx("span",{children:"Clinic"})]}),e.jsxs(r,{variant:"outline",onClick:()=>m(3),className:"h-auto py-2 flex-col gap-1",children:[e.jsx(q,{className:"w-4 h-4"}),e.jsx("span",{children:"Laxmi"})]}),e.jsxs(r,{variant:"outline",onClick:()=>m(4),className:"h-auto py-2 flex-col gap-1",children:[e.jsx(I,{className:"w-4 h-4"}),e.jsx("span",{children:"Badam"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Share this number with-"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(r,{variant:"outline",onClick:()=>y(1),className:"h-auto py-2 flex-col gap-1",children:[e.jsx(X,{className:"w-4 h-4"}),e.jsx("span",{children:"Reception"})]}),e.jsxs(r,{variant:"outline",onClick:()=>y(2),className:"h-auto py-2 flex-col gap-1",children:[e.jsx(V,{className:"w-4 h-4"}),e.jsx("span",{children:"OP Room"})]})]})]}),e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg text-sm text-blue-700 flex items-start gap-2",children:[e.jsx(F,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),e.jsx("p",{children:"Click the clipboard icon to paste a phone number"})]})]})]})};export{ne as default};
