import{r as u,j as e,B as N}from"./index-DYCdECr2.js";import{u as q,F as R,a,b as t,c as n,d as o,e as i,R as g,t as I,o as L,s as c,f as V}from"./RichTextEditor-SEif6zb0.js";import{I as d}from"./input-BlRor6HD.js";import{T as C}from"./textarea-CrPgbkNX.js";import{s as w}from"./client-opfxi3BE.js";import{T as G,a as P,b as v,c as y}from"./tabs-C7V-UyVv.js";const k=L({title:c().min(1,"Title is required"),description:c().min(1,"Description is required"),content:c().min(1,"Content is required"),cover_image_url:c().url("Please enter a valid URL"),pages:V.number().int().positive("Must be a positive number"),estimated_time:c().min(1,"Estimated time is required"),category_name:c().min(1,"Category is required"),next_steps:c().optional()}),H=({initialData:h,translations:p,onSubmit:E,isSubmitting:T})=>{const[F,_]=u.useState([]),[x,f]=u.useState({}),r=q({resolver:I(k),defaultValues:h||{}});u.useEffect(()=>{(async()=>{const{data:l,error:m}=await w.from("categories").select("*");m?console.error("Error fetching categories:",m):_(l||[])})()},[]),u.useEffect(()=>{h&&r.reset(h),p&&f(p)},[h,p,r]);const j=(s,l,m)=>{f(b=>({...b,[s]:{...b[s],[l]:m}}))},S=s=>{E(s,x)};return e.jsx(R,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(S),className:"space-y-8",children:[e.jsxs(G,{defaultValue:"english",className:"w-full",children:[e.jsxs(P,{className:"grid w-full grid-cols-2 sticky top-16 z-20 bg-background",children:[e.jsx(v,{value:"english",children:"English"}),e.jsx(v,{value:"telugu",children:"Telugu"})]}),e.jsxs(y,{value:"english",className:"space-y-8 pt-4",children:[e.jsx(a,{control:r.control,name:"title",render:({field:s})=>e.jsxs(t,{children:[e.jsx(n,{children:"Title"}),e.jsx(o,{children:e.jsx(d,{placeholder:"Enter guide title",...s})}),e.jsx(i,{})]})}),e.jsx(a,{control:r.control,name:"description",render:({field:s})=>e.jsxs(t,{children:[e.jsx(n,{children:"Description"}),e.jsx(o,{children:e.jsx(C,{placeholder:"Enter a short description",...s})}),e.jsx(i,{})]})}),e.jsx(a,{control:r.control,name:"content",render:({field:s})=>e.jsxs(t,{children:[e.jsx(n,{children:"Content"}),e.jsx(o,{children:e.jsx(g,{content:s.value||"",onChange:l=>{l==="<p></p>"?s.onChange(""):s.onChange(l)}})}),e.jsx(i,{})]})}),e.jsx(a,{control:r.control,name:"next_steps",render:({field:s})=>e.jsxs(t,{children:[e.jsx(n,{children:"Next Steps"}),e.jsx(o,{children:e.jsx(g,{content:s.value||"",onChange:s.onChange})}),e.jsx(i,{})]})})]}),e.jsxs(y,{value:"telugu",className:"space-y-8 pt-4",children:[e.jsxs(t,{children:[e.jsx(n,{children:"Translated Title (Telugu)"}),e.jsx(o,{children:e.jsx(d,{placeholder:"Enter Telugu title",value:x.te?.title||"",onChange:s=>j("te","title",s.target.value)})})]}),e.jsxs(t,{children:[e.jsx(n,{children:"Translated Description (Telugu)"}),e.jsx(o,{children:e.jsx(C,{placeholder:"Enter Telugu description",value:x.te?.description||"",onChange:s=>j("te","description",s.target.value)})})]}),e.jsxs(t,{children:[e.jsx(n,{children:"Translated Content (Telugu)"}),e.jsx(o,{children:e.jsx(g,{content:x.te?.content||"",onChange:s=>j("te","content",s)})})]}),e.jsxs(t,{children:[e.jsx(n,{children:"Translated Next Steps (Telugu)"}),e.jsx(o,{children:e.jsx(g,{content:x.te?.next_steps||"",onChange:s=>{s==="<p></p>"?j("te","next_steps",""):j("te","next_steps",s)}})})]})]})]}),e.jsxs("div",{className:"space-y-8 pt-8 border-t",children:[e.jsx(a,{control:r.control,name:"cover_image_url",render:({field:s})=>e.jsxs(t,{children:[e.jsx(n,{children:"Cover Image URL"}),e.jsx(o,{children:e.jsx(d,{placeholder:"https://example.com/image.jpg",...s})}),e.jsx(i,{})]})}),e.jsx(a,{control:r.control,name:"pages",render:({field:s})=>e.jsxs(t,{children:[e.jsx(n,{children:"Pages"}),e.jsx(o,{children:e.jsx(d,{type:"number",placeholder:"e.g., 12",...s})}),e.jsx(i,{})]})}),e.jsx(a,{control:r.control,name:"estimated_time",render:({field:s})=>e.jsxs(t,{children:[e.jsx(n,{children:"Estimated Time"}),e.jsx(o,{children:e.jsx(d,{placeholder:"e.g., 15 min read",...s})}),e.jsx(i,{})]})}),e.jsx(a,{control:r.control,name:"category_name",render:({field:s})=>e.jsxs(t,{children:[e.jsx(n,{children:"Category"}),e.jsx(o,{children:e.jsxs(e.Fragment,{children:[e.jsx(d,{list:"category-suggestions",placeholder:"Select or create a category",...s}),e.jsx("datalist",{id:"category-suggestions",children:F.map(l=>e.jsx("option",{value:l.name},l.id))})]})}),e.jsx(i,{})]})})]}),e.jsx(N,{type:"submit",disabled:T,children:T?"Submitting...":"Submit Guide"})]})})};export{H as G};
