import{c as $,r as i,j as e,w as k,B as z}from"./index-DYCdECr2.js";import{H as G,F as O}from"./Footer-5CF68671.js";import{C as u,a as L,c as E,b as J,d as K}from"./card-B7__9nPQ.js";import{B as f}from"./badge-zPQ83eSx.js";import{s as A}from"./client-opfxi3BE.js";import{S as a}from"./skeleton-DeYKIxXw.js";import{u as Q,L as V}from"./LanguageSwitcher-KF_GyB1b.js";import{U as B}from"./user-B71ZlHy8.js";import{C as M}from"./calendar-B3ZTj5yV.js";import{C as W}from"./clock-9TRYkq0J.js";import"./index-DOA-4b-m.js";import"./phone-DAWZ9XqU.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=$("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),oe=()=>{const{t:b,i18n:d}=Q(),[n,g]=i.useState([]),[D,H]=i.useState([]),[c,j]=i.useState(null),[o,y]=i.useState(!0),[N,C]=i.useState(1),[R,m]=i.useState(!0),p=5;i.useEffect(()=>{(async()=>{const{data:t,error:r}=await A.from("categories").select("*");r?console.error("Error fetching categories:",r):H(t||[])})()},[]),i.useEffect(()=>{(async()=>{y(!0);let t=A.from("posts").select("*, categories(name), post_translations(*)",{count:"exact"});c&&(t=t.eq("category_id",c));const r=(N-1)*p,w=r+p-1;t=t.range(r,w).order("created_at",{ascending:!1});const{data:F,error:_,count:S}=await t;if(_)console.error("Error fetching posts:",_),g([]),m(!1);else{const h=F||[],U=n.length;if(g(v=>N===1?h:[...v,...h]),S!==null){const v=U+h.length;m(v<S)}else m(h.length===p)}y(!1)})()},[c,N]);const P=s=>{if(s===null){if(c===null)return;j(null)}else j(s===c?null:s);C(1),g([]),m(!0)},T=()=>{o||C(s=>s+1)},x=(s,t)=>{if(t==="en")return{title:s.title,excerpt:s.excerpt};const r=s.post_translations.find(w=>w.language===t);return{title:r?.title||s.title,excerpt:r?.excerpt||s.excerpt}},l=n[0],q=n.slice(1);return e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(G,{}),e.jsx("main",{className:"flex-grow bg-muted/50 pt-20",children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsxs("div",{className:"flex justify-center items-center gap-4 mb-4",children:[e.jsx("h1",{className:"text-4xl font-heading font-bold text-primary",children:b("learn.blog.title","Health Blog")}),e.jsx(V,{})]}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:b("learn.blog.subtitle","Latest health tips and medical insights")})]}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-2 mb-8",children:[e.jsx(f,{variant:c===null?"default":"secondary",className:"cursor-pointer hover:bg-primary hover:text-primary-foreground transition-colors",onClick:()=>P(null),children:"All Posts"},"all"),D.map(s=>e.jsx(f,{variant:c===s.id?"default":"secondary",className:"cursor-pointer hover:bg-primary hover:text-primary-foreground transition-colors",onClick:()=>P(s.id),children:s.name},s.id))]}),o&&n.length===0&&e.jsxs("div",{children:[e.jsx(u,{className:"mb-8 overflow-hidden",children:e.jsxs("div",{className:"md:flex",children:[e.jsx("div",{className:"md:w-1/2",children:e.jsx(a,{className:"w-full h-64 md:h-full"})}),e.jsxs("div",{className:"md:w-1/2 p-6",children:[e.jsx(a,{className:"h-4 w-1/4 mb-3"}),e.jsx(a,{className:"h-8 w-3/4 mb-3"}),e.jsx(a,{className:"h-4 w-full mb-2"}),e.jsx(a,{className:"h-4 w-full mb-4"}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground mb-4",children:[e.jsx(a,{className:"h-4 w-24 mr-4"}),e.jsx(a,{className:"h-4 w-24 mr-4"}),e.jsx(a,{className:"h-4 w-24"})]}),e.jsx(a,{className:"h-10 w-32"})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(3)].map((s,t)=>e.jsxs(u,{children:[e.jsx(a,{className:"h-40 w-full"}),e.jsxs(L,{children:[e.jsx(a,{className:"h-4 w-1/3 mb-2"}),e.jsx(a,{className:"h-6 w-full mb-2"}),e.jsx(a,{className:"h-4 w-full"})]}),e.jsx(E,{children:e.jsx(a,{className:"h-4 w-1/2"})})]},t))})]}),!o&&n.length===0&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-2",children:"No posts found"}),e.jsx("p",{className:"text-muted-foreground",children:"There are no blog posts in this category yet. Please check back later."})]}),n.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(u,{className:"mb-8 overflow-hidden",children:e.jsxs("div",{className:"md:flex",children:[e.jsx("div",{className:"md:w-1/2",children:e.jsx("img",{src:l.image_url,alt:l.title,className:"w-full h-64 md:h-full object-cover",loading:"lazy"})}),e.jsxs("div",{className:"md:w-1/2 p-6 flex flex-col justify-center",children:[e.jsx(f,{className:"mb-3 w-fit",children:l.categories.name}),e.jsx("h2",{className:"text-2xl font-heading font-bold mb-3",children:x(l,d.language).title}),e.jsx("p",{className:"text-muted-foreground mb-4",children:x(l,d.language).excerpt}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground mb-4 flex-wrap",children:[e.jsx(B,{size:16,className:"mr-1"}),e.jsx("span",{className:"mr-4",children:l.author}),e.jsx(M,{size:16,className:"mr-1"}),e.jsx("span",{className:"mr-4",children:new Date(l.created_at).toLocaleDateString()}),e.jsx(W,{size:16,className:"mr-1"}),e.jsxs("span",{children:[l.read_time_minutes," min read"]})]}),e.jsx(k,{to:`/blog/${l.id}`,children:e.jsxs(z,{className:"group w-fit",children:["Read More",e.jsx(X,{size:16,className:"ml-2 group-hover:translate-x-1 transition-transform"})]})})]})]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:q.map(s=>e.jsx(k,{to:`/blog/${s.id}`,children:e.jsxs(u,{className:"overflow-hidden hover:shadow-lg transition-shadow h-full flex flex-col",children:[e.jsx("div",{className:"aspect-video overflow-hidden",children:e.jsx("img",{src:s.image_url,alt:s.title,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-300",loading:"lazy"})}),e.jsxs(L,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(f,{variant:"secondary",children:s.categories.name}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[s.read_time_minutes," min read"]})]}),e.jsx(J,{className:"text-lg leading-tight",children:x(s,d.language).title}),e.jsx(K,{children:x(s,d.language).excerpt})]}),e.jsx(E,{className:"mt-auto",children:e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(B,{size:14,className:"mr-1"}),e.jsx("span",{className:"mr-3",children:s.author}),e.jsx(M,{size:14,className:"mr-1"}),e.jsx("span",{children:new Date(s.created_at).toLocaleDateString()})]})})]})},s.id))}),R&&e.jsx("div",{className:"text-center mt-12",children:e.jsx(z,{variant:"outline",size:"lg",onClick:T,disabled:o,children:o?"Loading...":"Load More Articles"})})]})]})})}),e.jsx(O,{})]})};export{oe as default};
